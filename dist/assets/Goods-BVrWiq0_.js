import{b as S,a as r,u as C,F as i,j as e,C as F,I as P,B as o,R,P as n,c as b,d as N}from"./index-DgsCbQfb.js";import{i as $}from"./error-BX8EiPuL.js";import{g as v,d as T}from"./goods-DGpzH-7m.js";import{F as z,T as p}from"./index-DEZmM0Pr.js";import{S as E}from"./index-DyYH2x0X.js";import{R as k}from"./EditOutlined-Bmp8BqMa.js";import{R as B}from"./DeleteOutlined-RYsHWtxa.js";const q=()=>{const c=S(),x={1:e.jsx(p,{color:"warning",children:"下架"}),2:e.jsx(p,{color:"success",children:"在售"})},u={1:"唱片",2:"衣饰",3:"日用品",4:"其它",5:"特价"},h=[{title:"封面",dataIndex:"images",width:100,render:t=>e.jsx("img",{src:`http://8.134.124.55:80/post/uploads/${t[0]}`||$,width:60,height:60,alt:""})},{title:"名称",dataIndex:"goodsName",width:300},{title:"销售人员",dataIndex:"sellerId"},{title:"状态",dataIndex:"status",render:t=>x[t]},{title:"类别",dataIndex:"type",render:t=>u[t]},{title:"价格",dataIndex:"price"},{title:"销量",dataIndex:"sales"},{title:"浏览量",dataIndex:"view"},{title:"库存",dataIndex:"amount"},{title:"操作",width:200,render:t=>e.jsxs(E,{size:"middle",children:[e.jsx(n,{content:"查看订单",placement:"top",children:e.jsx(o,{type:"primary",shape:"circle",icon:e.jsx(b,{}),onClick:()=>c(`/layout/order?goodsId=${t.id}`)})}),e.jsx(n,{content:"修改商品",placement:"top",children:e.jsx(o,{type:"primary",shape:"circle",icon:e.jsx(k,{}),onClick:()=>c(`/layout/edit?id=${t.id}`)})}),e.jsx(N,{title:"删除商品",description:"确认要删除该商品吗?",onConfirm:()=>w(t),okText:"Yes",cancelText:"No",children:e.jsx(n,{content:"删除商品",placement:"left",children:e.jsx(o,{type:"primary",danger:!0,shape:"circle",disabled:t.status===3,icon:e.jsx(B,{})})})})]})}],[j,I]=r.useState([]),[f,g]=r.useState(0),y=C(t=>t.user.userInfo.id),[s,l]=r.useState({role:3,sellerId:"",pageSize:10,pageNum:1});r.useEffect(()=>{async function t(){const a=await v(s);I(a.data.list),g(a.data.total)}t()},[s]);const w=async t=>{const a={id:t.id,sellerId:y};await T(a),l({...s})},[d]=i.useForm(),m=()=>{l({...s,sellerId:d.getFieldValue("search")})};return e.jsx("div",{children:e.jsxs(F,{title:"商品管理",style:{marginBottom:20},children:[e.jsx(i,{initialValues:{},form:d,onFinish:m,children:e.jsxs("div",{className:"search-box",children:[e.jsx(i.Item,{label:"按销售人员查看",name:"search",children:e.jsx(P,{className:"search",placeholder:"输入销售人员id",allowClear:!0,onPressEnter:m})}),e.jsx(i.Item,{children:e.jsx(o,{type:"primary",htmlType:"submit",icon:e.jsx(R,{}),shape:"circle",className:"but"})})]})}),e.jsx(z,{rowKey:"id",columns:h,dataSource:j,pagination:{total:f,pageSize:s.pageSize}})]})})};export{q as default};
